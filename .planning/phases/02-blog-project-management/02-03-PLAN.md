---
phase: 02-blog-project-management
plan: 03
type: execute
wave: 3
depends_on: ["02-02"]
files_modified:
  - src/routes/_authed/dashboard.tsx
  - src/components/dashboard/empty-state.tsx
  - src/components/dashboard/stats-bar.tsx
  - src/components/dashboard/project-card.tsx
  - src/components/projects/project-dialog.tsx
  - src/components/projects/delete-dialog.tsx
autonomous: true

must_haves:
  truths:
    - "User sees empty state with 'Create your first project' CTA when no projects exist"
    - "User sees project cards in responsive grid when projects exist"
    - "User can open create dialog, fill in name + blog URL, submit, and see new project card appear"
    - "User can open edit dialog from a project card, modify fields, and see changes reflected"
    - "User can delete a project via confirm dialog and see it removed from the grid"
    - "Global stats bar shows scheduled, published, and pending counts (zeros in Phase 2)"
    - "Toast notifications appear on create, update, and delete"
  artifacts:
    - path: "src/routes/_authed/dashboard.tsx"
      provides: "Main dashboard with project grid, stats bar, and create button"
      contains: "useBlogProjects"
    - path: "src/components/dashboard/stats-bar.tsx"
      provides: "Global statistics summary bar"
      contains: "scheduled"
    - path: "src/components/dashboard/project-card.tsx"
      provides: "Individual project card with name, URL, stats, edit/delete actions"
      contains: "ProjectCard"
    - path: "src/components/projects/project-dialog.tsx"
      provides: "Create/Edit modal with React Hook Form + Zod validation"
      contains: "useForm"
    - path: "src/components/projects/delete-dialog.tsx"
      provides: "Delete confirmation dialog"
      contains: "useDeleteBlogProject"
  key_links:
    - from: "src/routes/_authed/dashboard.tsx"
      to: "src/lib/hooks/use-blog-projects.ts"
      via: "useBlogProjects hook for data fetching"
      pattern: "useBlogProjects"
    - from: "src/components/projects/project-dialog.tsx"
      to: "src/lib/hooks/use-blog-projects.ts"
      via: "useCreateBlogProject and useUpdateBlogProject hooks"
      pattern: "useCreateBlogProject|useUpdateBlogProject"
    - from: "src/components/projects/delete-dialog.tsx"
      to: "src/lib/hooks/use-blog-projects.ts"
      via: "useDeleteBlogProject hook"
      pattern: "useDeleteBlogProject"
    - from: "src/components/dashboard/project-card.tsx"
      to: "src/routes/_authed/dashboard.tsx"
      via: "rendered in project grid, triggers edit/delete dialogs"
      pattern: "ProjectCard"
---

<objective>
Build the complete dashboard UI: project cards in responsive grid, global stats bar, empty state with CTA, create/edit dialog with form validation, and delete confirmation dialog. This is the primary user-facing deliverable of Phase 2.

Purpose: This transforms the empty dashboard into a functional blog project management interface where users can perform all CRUD operations with visual feedback.
Output: Dashboard route with project grid, stats bar, project dialog (create/edit), delete dialog, and updated empty state.
</objective>

<execution_context>
@/Users/cweissteiner/.claude/get-shit-done/workflows/execute-plan.md
@/Users/cweissteiner/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-blog-project-management/02-CONTEXT.md
@.planning/phases/02-blog-project-management/02-RESEARCH.md
@src/routes/_authed/dashboard.tsx
@src/components/dashboard/empty-state.tsx
@src/components/layout/header.tsx
@src/components/ui/button.tsx
@src/lib/auth.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project dialog (create/edit) and delete dialog components</name>
  <files>
    src/components/projects/project-dialog.tsx
    src/components/projects/delete-dialog.tsx
  </files>
  <action>
    1. Create `src/components/projects/project-dialog.tsx`:
       - Shared modal for both create and edit modes
       - Props: `open: boolean`, `onOpenChange: (open: boolean) => void`, `project?: BlogProject` (if provided = edit mode)
       - Use React Hook Form with Zod resolver for validation
       - Zod schema:
         - `name`: string, min 1 ("Name is required"), max 100 ("Name too long")
         - `blog_url`: string, url ("Must be a valid URL")
         - `rss_url`: string, url ("Must be a valid URL").optional().or(z.literal(''))
         - `scraping_frequency`: enum ['daily', 'weekly', 'manual'], default 'weekly'
       - For create: only show name + blog_url fields (minimal creation per CONTEXT.md)
       - For edit: show all fields (name, blog_url, rss_url, scraping_frequency)
       - Inline validation errors: red text (`text-sm text-red-600`) below each field
       - Submit button shows "Saving..." when `isSubmitting`
       - Use `useCreateBlogProject()` for create, `useUpdateBlogProject()` for edit
       - Reset form on close and on successful submit
       - Use shadcn/ui Dialog, Input, Label, Button components

    2. Create `src/components/projects/delete-dialog.tsx`:
       - Props: `open: boolean`, `onOpenChange: (open: boolean) => void`, `project: BlogProject | null`
       - Shows project name being deleted
       - "Are you sure?" confirmation text with Cancel and Delete buttons
       - Delete button uses `useDeleteBlogProject()` hook
       - Delete button shows "Deleting..." when mutation is pending
       - Delete button has destructive styling (red/danger variant — add `variant: 'destructive'` to Button if not already present, or use red Tailwind classes)
       - On success: close dialog
       - Note: In Phase 2, related data check is deferred — all projects are safe to delete since articles/pins don't exist yet. The `checkProjectRelatedData` API function exists for future use.
  </action>
  <verify>
    - `src/components/projects/project-dialog.tsx` exports ProjectDialog component
    - ProjectDialog uses useForm with zodResolver, shows inline validation errors
    - Create mode shows name + blog_url only; edit mode shows all 4 fields
    - `src/components/projects/delete-dialog.tsx` exports DeleteDialog component
    - DeleteDialog uses useDeleteBlogProject hook with loading state
    - `npm run build` passes
  </verify>
  <done>Create/edit dialog validates input with Zod and submits via TanStack Query mutations. Delete dialog confirms before deleting with loading feedback.</done>
</task>

<task type="auto">
  <name>Task 2: Build dashboard with project grid, stats bar, and updated empty state</name>
  <files>
    src/routes/_authed/dashboard.tsx
    src/components/dashboard/empty-state.tsx
    src/components/dashboard/stats-bar.tsx
    src/components/dashboard/project-card.tsx
  </files>
  <action>
    1. Create `src/components/dashboard/stats-bar.tsx`:
       - Displays 3 stat cards in a row: Scheduled, Published, Pending
       - Each card shows a count number and label
       - Use Card component from shadcn/ui
       - In Phase 2, all counts are 0 (articles/pins don't exist yet). Hard-code zeros with structure ready for real data.
       - Make cards visually distinct (icons from lucide-react: Clock for Scheduled, CheckCircle for Published, AlertCircle for Pending)
       - Cards are clickable (cursor-pointer, hover state) — onClick currently does nothing (navigation wired in future phases)

    2. Create `src/components/dashboard/project-card.tsx`:
       - Props: `project: BlogProject`, `onEdit: (project: BlogProject) => void`, `onDelete: (project: BlogProject) => void`
       - Displays: project name (bold), blog_url (truncated, muted text), and per-project stat row (0 articles, 0 scheduled, 0 published — placeholder for future)
       - Entire card is clickable and navigates to `/projects/${project.id}` using TanStack Router's `<Link>` component
       - Edit button (Pencil icon) and Delete button (Trash icon) in card footer — use `e.preventDefault()` + `e.stopPropagation()` to prevent card navigation when clicking action buttons
       - Use Card, CardHeader, CardContent, CardFooter from shadcn/ui
       - Responsive: Cards fit in CSS Grid defined by parent

    3. Update `src/components/dashboard/empty-state.tsx`:
       - Change to accept `onCreateProject: () => void` prop
       - Update CTA button: remove `disabled`, wire `onClick` to `onCreateProject`
       - Remove "(Blog creation coming in next phase)" text
       - Keep illustration/icon and "No blog projects yet" messaging

    4. Update `src/routes/_authed/dashboard.tsx`:
       - Import and use `useBlogProjects()` hook
       - Add state for dialog management: `createDialogOpen`, `editProject` (BlogProject | null), `deleteProject` (BlogProject | null)
       - Layout:
         - Header (existing)
         - StatsBar below header
         - "Create Project" button (top-right of project section)
         - If projects empty: render EmptyDashboardState with onCreateProject opening the dialog
         - If projects exist: render CSS Grid `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`
         - Map projects to ProjectCard components
       - Render ProjectDialog (create mode when createDialogOpen, edit mode when editProject is set)
       - Render DeleteDialog (when deleteProject is set)
       - Handle loading state: show loading skeleton or spinner while useBlogProjects is loading
       - Handle error state: show error message with retry button if query fails
  </action>
  <verify>
    - Dashboard renders StatsBar with 3 stat cards
    - Empty state shows CTA button that opens create dialog
    - Project grid shows ProjectCard components in responsive grid
    - Edit/Delete buttons on cards trigger respective dialogs
    - `npm run build` passes
    - Visit `/dashboard` in browser — UI renders correctly
  </verify>
  <done>Dashboard displays project cards in responsive grid with stats bar, functional create/edit/delete dialogs, empty state CTA, loading states, and error handling.</done>
</task>

</tasks>

<verification>
- Dashboard shows empty state with working CTA when no projects exist
- Creating a project via dialog adds a card to the grid with toast notification
- Editing a project via dialog updates the card with toast notification
- Deleting a project via confirm dialog removes it from grid with toast notification
- Stats bar shows 3 stat cards with zero counts (placeholder)
- Project cards are clickable and navigate to /projects/:id
- Form validation shows inline errors for invalid input
- Loading state displays while data is fetching
- Build passes
</verification>

<success_criteria>
- All 5 CRUD-related success criteria from Phase 2 are satisfied through the dashboard UI
- BLOG-01: Create project via dialog (name + URL required)
- BLOG-02: View project list as card grid
- BLOG-03: Edit project via dialog (all fields)
- BLOG-04: Delete project via confirmation dialog
- DASH-01: Stats bar displays overview statistics (zeros for now)
- Toast notifications for all operations
- Responsive layout works on mobile and desktop
</success_criteria>

<output>
After completion, create `.planning/phases/02-blog-project-management/02-03-SUMMARY.md`
</output>
